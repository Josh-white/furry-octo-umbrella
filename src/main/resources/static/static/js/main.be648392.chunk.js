(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(17),c=n.n(i),s=(n(24),n(3)),o=(n(25),n.p+"static/media/battleshipLogo.80ab244e.png"),u=(n(26),n(8)),p=n.n(u),l=n(18),h=(n(28),n(0)),d=function(e){var t=e.className,n=e.size,r=e.isVertical,i=[],c=Object(a.useState)(),o=Object(s.a)(c,2),u=o[0],p=o[1];for(var l=function(e){i.push(Object(h.jsx)("div",{className:"".concat(u===e?"hovered":""," ship--").concat(t," "),"aria-label":"".concat(t,"-").concat(e),onMouseEnter:function(){return function(e){p(e)}(e)},onMouseLeave:function(){p(0)}},"".concat(t,"-").concat(e)))},d=1;d<=n;d++)l(d);return Object(h.jsx)("div",{"data-testid":"".concat(t,"--container"),id:"".concat(t),"data-shipsize":n,className:r?"ship--container--vertical":"ship--container--horizontal",draggable:!0,onDragStart:function(e){return function(e){var t=JSON.stringify({shipName:e.currentTarget.id,shipPieceNumber:u,isVertical:r,size:n});return e.dataTransfer.setData("ShipData",t)}(e)},onDrag:function(e){return function(e){e.preventDefault()}(e)},onDragEnd:function(e){return function(e){e.preventDefault()}(e)},children:i})},j=n(4),b=function(){for(var e=[],t=0;t<10;t++)for(var n=0;n<10;n++){var a={x:t,y:n,isOpen:!0};e.push(a)}return e},f=[{shipName:"carrier",size:5},{shipName:"battleship",size:4},{shipName:"cruiser",size:3},{shipName:"submarine",size:3},{shipName:"destroyer",size:2}],m=Object(a.createContext)({}),O=function(e){var t=e.children,n=function(){var e=Object(a.useState)(b()),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(b()),c=Object(s.a)(i,2),o=c[0],u=c[1];return{playerBoard:n,enemyBoard:o,playerPlacedShip:function(e){r((function(t){return t.map((function(t){var n=e.find((function(e){return t.x===e.x&&t.y===e.y&&t.isOpen}));return n?Object(j.a)(Object(j.a)({},t),{},{isOpen:n.isOpen,shipName:n.shipName}):Object(j.a)({},t)}))}))},enemyPlacedShip:function(e){u((function(t){return t.map((function(t){return t.x===e.x&&t.y===e.y?Object(j.a)(Object(j.a)({},t),{},{isOpen:!1,shipName:e.shipName}):Object(j.a)({},t)}))}))},resetPlayerBoard:function(){r(b())},isValidShipPlacement:function(e){var t=!1,a=0;return n.forEach((function(t){e.find((function(e){return t.x===e.x&&t.y===e.y&&t.isOpen}))&&a++})),a===e.length&&(t=!0),t}}}(),r=function(){var e=Object(a.useState)(f),t=Object(s.a)(e,2),n=t[0],r=t[1];return{port:n,removeShip:function(e){var t=n.filter((function(t){return t.shipName!==e}));r(t)},resetPort:function(){r(f)}}}();return Object(h.jsx)(m.Provider,{value:{board:n,port:r},children:t})},x=function(){var e=r.a.useContext(m);return Object(j.a)(Object(j.a)({},e.board),e.port)},v=n(19),N=n.n(v),y=function(){var e=x(),t=e.port,n=e.resetPort,r=e.resetPlayerBoard,i=e.playerBoard,c=Object(a.useState)(!0),o=Object(s.a)(c,2),u=o[0],j=o[1],b=function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post("/startNewGame",i);case 3:t=e.sent,alert("Oh shit the backend took the request."),console.log(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),alert("my creator has not build the backend to handle the request"),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"port--container",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Safe Harbor"}),Object(h.jsx)("button",{onClick:function(){j(!u)},children:"Rotate"}),Object(h.jsx)("button",{onClick:function(){return n(),void r()},children:"Reset Ships"}),Object(h.jsx)("button",{disabled:t.length>0,onClick:function(){return b()},children:"Start Game"})]}),Object(h.jsx)("div",{className:"port",children:t.map((function(e){return Object(h.jsx)(d,{className:e.shipName,size:e.size,isVertical:u},"".concat(e.shipName,"-").concat(e.size))}))})]})},P=function(e){var t=e.className,n=e.x,a=e.y,r=e.isOpen,i=e.shipName,c=x(),s=c.removeShip,o=c.playerPlacedShip,u=c.isValidShipPlacement,p="grid";return t&&(p="".concat(p," ").concat(t)),r&&(p="".concat(p," grid--open")),!r&&i&&(p="".concat(p," ").concat(i)),"playerBoard--grid"===t?Object(h.jsx)("div",{className:p,"data-x":n,"data-y":a,"aria-label":"".concat(t," ").concat(n,",").concat(a),onDrop:function(e){return function(e){e.preventDefault();var t=JSON.parse(e.dataTransfer.getData("ShipData")),r=function(e){var t=[];if(e.isVertical){for(var n=e.xPosition-1,a=1;a<e.pieceNumber;a++){var r={x:n,y:e.yPosition,isOpen:!1,shipName:e.shipName};t.push(r),n--}t.push({x:e.xPosition,y:e.yPosition,isOpen:!1,shipName:e.shipName});for(var i=e.xPosition+1,c=e.size;c>e.pieceNumber;c--){var s={x:i,y:e.yPosition,isOpen:!1,shipName:e.shipName};t.push(s),i++}}if(!e.isVertical){for(var o=e.yPosition-1,u=1;u<e.pieceNumber;u++){var p={x:e.xPosition,y:o,isOpen:!1,shipName:e.shipName};t.push(p),o--}t.push({x:e.xPosition,y:e.yPosition,isOpen:!1,shipName:e.shipName});for(var l=e.yPosition+1,h=e.size;h>e.pieceNumber;h--){var d={x:e.xPosition,y:l,isOpen:!1,shipName:e.shipName};t.push(d),l++}}return t}({xPosition:n,yPosition:a,pieceNumber:t.shipPieceNumber,size:t.size,shipName:t.shipName,isVertical:t.isVertical});u(r)&&(s(t.shipName),o(r))}(e)},onDragOver:function(e){return function(e){e.preventDefault()}(e)},onDragEnter:function(e){},onDragLeave:function(e){}}):Object(h.jsx)("div",{className:p,"data-x":n,"data-y":a,"aria-label":"".concat(t," ").concat(n,",").concat(a)})},g=function(){var e=x().enemyBoard;return Object(h.jsxs)("div",{className:"enemyBoard",children:[Object(h.jsx)("h1",{children:"Enemy Board"}),Object(h.jsxs)("div",{className:"playerBoard--axis-container",children:[Object(h.jsx)("div",{className:"playerBoard--axis-x",children:function(){for(var e=[],t=1;t<11;t++)e.push(Object(h.jsx)("h3",{children:t}));return e}()}),Object(h.jsxs)("div",{className:"enemyBoard--container",children:[e.map((function(e){return Object(h.jsx)(P,{className:"enemyBoard--grid",isOpen:e.isOpen,x:e.x,y:e.y},"enemyBoard-".concat(e.x,"-").concat(e.y))})),Object(h.jsx)("div",{className:"playerBoard--axis-y",children:function(){for(var e=[],t=65;t<75;t++)e.push(Object(h.jsx)("h3",{children:String.fromCharCode(t)}));return e}()})]})]})]})},B=function(){var e=x().playerBoard;return Object(h.jsxs)("div",{className:"playerBoard",children:[Object(h.jsx)("h1",{children:"Player Board"}),Object(h.jsxs)("div",{className:"playerBoard--axis-container",children:[Object(h.jsx)("div",{className:"playerBoard--axis-x",children:function(){for(var e=[],t=1;t<11;t++)e.push(Object(h.jsx)("h3",{children:t}));return e}()}),Object(h.jsxs)("div",{className:"playerBoard--container",children:[e.map((function(e){return Object(h.jsx)(P,{className:"playerBoard--grid",isOpen:e.isOpen,x:e.x,y:e.y,shipName:e.shipName},"playerBoard-".concat(e.x,"-").concat(e.y))})),Object(h.jsx)("div",{className:"playerBoard--axis-y",children:function(){for(var e=[],t=65;t<75;t++)e.push(Object(h.jsx)("h3",{children:String.fromCharCode(t)}));return e}()})]})]})]})},S=function(){return Object(h.jsxs)(O,{children:[Object(h.jsxs)("div",{className:"game--container",children:[Object(h.jsx)(B,{}),Object(h.jsx)(g,{})]}),Object(h.jsx)(y,{})]})},z=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],r=t[1];return n?Object(h.jsx)(S,{}):Object(h.jsxs)("div",{className:"splashscreen",children:[Object(h.jsx)("img",{src:o,alt:"battleship logo",className:"logo"}),Object(h.jsx)("div",{className:"button_container",children:Object(h.jsx)("button",{"aria-label":"One Player",onClick:function(){r(!0)},children:"One Player"})})]})};var D=function(){return Object(h.jsx)(z,{})};c.a.render(Object(h.jsx)(D,{}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.be648392.chunk.js.map